(this.webpackJsonpdynalite_frontend=this.webpackJsonpdynalite_frontend||[]).push([[0],{184:function(e,t,n){e.exports=n(363)},189:function(e,t,n){},302:function(e,t,n){},363:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(2),o=n.n(c),u=(n(189),n(30)),i=n(31),l=n(37),s=n(32),m=n(39),p=n(179),d=n(41),f=n(33),h=n(34),b=n(26),v=n.n(b),y=n(57),j=n(88),O=n(21),g=n.n(O),E=n(18),k=n(74),w=n.n(k),x=n(166),C=n.n(x),A=function(){var e=Object(y.a)(v.a.mark((function e(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.abrupt("return",C.a.get("https://www.evantay.com/tech/dynalite-api/occupancy").then((function(e){return e.data})));case 4:e.prev=4,e.t0=e.catch(0),console.error(e.t0);case 7:case"end":return e.stop()}}),e,null,[[0,4]])})));return function(){return e.apply(this,arguments)}}(),D=function(e){var t=Object(E.times)(7,(function(){return[]}));return Object(E.forEach)(e,(function(e){var n=function(e,t){var n=e.toArray()[2],a=t.toArray()[2];return a<n?a+e.daysInMonth()-n:a-n}(w()([2019,10,28,8]).tz("Asia/Singapore"),w()(e.timestamp).tz("Asia/Singapore"))%7;t[n].push(e)})),Object(E.map)(t,(function(e){return Object(E.sortBy)(e,["timestamp","rpiId"])}))},B=function(e){var t=Object(E.times)(24,(function(){return[]}));return Object(E.forEach)(e,(function(e){var n=function(e,t){var n=e.toArray()[3],a=t.toArray()[3];return a<n?a+24-n:a-n}(w()([2019,10,28,8]).tz("Asia/Singapore"),w()(e.timestamp).tz("Asia/Singapore"))%24;t[n].push(e)})),Object(E.map)(t,(function(e){return Object(E.sortBy)(e,["timestamp","rpiId"])}))},S=function(e){var t=0,n=1;return Object(E.map)(e,(function(e){Object(E.forEach)(e,(function(e){e.isOccupied&&(t+=1),n+=1}));var a=t/n;return t=0,n=1,Object(E.round)(a,2)}))};function T(){var e=Object(f.a)(["\n\twidth: 1000px;\n\theight: 600px;\n"]);return T=function(){return e},e}var I=h.a.div(T()),z=function(e){function t(){var e;return Object(u.a)(this,t),(e=Object(l.a)(this,Object(s.a)(t).call(this))).state={labels:["Mon","Tues","Wed","Thurs","Fri","Sat","Sun"]},e}return Object(m.a)(t,e),Object(i.a)(t,[{key:"getUpdatedData",value:function(){var e=Object(y.a)(v.a.mark((function e(){var t;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A();case 2:return t=e.sent,e.abrupt("return",S(D(t)));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){var e=this;this.getUpdatedData().then((function(t){return e.setState({datasets:[{label:"Room Occupancy by Day",backgroundColor:g()(),borderColor:g()(),borderWidth:1,hoverBackgroundColor:g()(),hoverBorderColor:g()(),data:t}]})}))}},{key:"render",value:function(){return r.a.createElement(I,null,r.a.createElement(j.a,{data:this.state}))}}]),t}(r.a.Component),W=n(364),F=n(366),H=(n(302),W.a.Header),M=function(e){function t(){var e;return Object(u.a)(this,t),(e=Object(l.a)(this,Object(s.a)(t).call(this))).handleClick=function(t){e.setState({current:t.key})},e.state={current:1},e}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(W.a,null,r.a.createElement(H,null,r.a.createElement("div",{className:"logo"}),r.a.createElement(F.a,{theme:"dark",mode:"horizontal",defaultSelectedKeys:["1"],selectedKeys:[this.state.current],onClick:this.handleClick,style:{lineHeight:"64px"}},r.a.createElement(F.a.Item,{key:"1"},r.a.createElement("a",{href:"/day",rel:"noopener noreferrer"},"By Day")),r.a.createElement(F.a.Item,{key:"2"},r.a.createElement("a",{href:"/hour",rel:"noopener noreferrer"},"By Hour"))))))}}]),t}(r.a.Component),U=n(365);function J(){var e=Object(f.a)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  padding-top: 5rem;\n"]);return J=function(){return e},e}var K=U.a.Title,R=h.a.div(J()),_=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(M,null),r.a.createElement(U.a,{style:{textAlign:"center",paddingTop:"5rem"}},r.a.createElement(K,{level:3},"A project brought to you by Team Dynalite.")),r.a.createElement(R,null,r.a.createElement(z,null)))};function N(){var e=Object(f.a)(["\n\twidth: 1000px;\n\theight: 600px;\n"]);return N=function(){return e},e}var $=h.a.div(N()),q=function(e){function t(){var e;return Object(u.a)(this,t),(e=Object(l.a)(this,Object(s.a)(t).call(this))).state={labels:["12am","1am","2am","3am","4am","5am","6am","7am","8am","9am","10am","11am","12pm","1pm","2pm","3pm","4pm","5pm","6pm","7pm","8pm","9pm","10pm","11pm"]},e}return Object(m.a)(t,e),Object(i.a)(t,[{key:"getUpdatedData",value:function(){var e=Object(y.a)(v.a.mark((function e(){var t;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A();case 2:return t=e.sent,console.log(B(t)),e.abrupt("return",S(B(t)));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){var e=this;this.getUpdatedData().then((function(t){return e.setState({datasets:[{label:"Room Occupancy by Hour",backgroundColor:g()(),borderColor:g()(),borderWidth:1,hoverBackgroundColor:g()(),hoverBorderColor:g()(),data:t}]})}))}},{key:"render",value:function(){return r.a.createElement($,null,r.a.createElement(j.a,{data:this.state}))}}]),t}(r.a.Component);function G(){var e=Object(f.a)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  padding-top: 5rem;\n"]);return G=function(){return e},e}var L=U.a.Title,P=h.a.div(G()),Q=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(M,null),r.a.createElement(U.a,{style:{textAlign:"center",paddingTop:"5rem"}},r.a.createElement(L,{level:3},"A project brought to you by Team Dynalite.")),r.a.createElement(P,null,r.a.createElement(q,null)))},V=(n(361),function(e){function t(){return Object(u.a)(this,t),Object(l.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return console.log("Dynalite client: v0.1.0"),r.a.createElement(p.a,{basename:"https://www.evantay.com/tech/dynalite"},r.a.createElement(d.c,null,r.a.createElement(d.a,{path:"day",component:_}),r.a.createElement(d.a,{path:"hour",component:Q}),r.a.createElement(d.a,{component:_})))}}]),t}(a.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(V,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[184,1,2]]]);
//# sourceMappingURL=main.973152b9.chunk.js.map